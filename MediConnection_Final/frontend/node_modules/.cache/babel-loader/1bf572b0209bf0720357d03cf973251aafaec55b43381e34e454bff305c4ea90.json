{"ast":null,"code":"var _jsxFileName = \"/Users/ray/Desktop/Medico/frontend/src/containers/settings/widgets/deleteUser.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { NavItem } from \"../../../components/navs\";\nimport { TitleBar, TitleButton, TitleButtons, Widget, WidgetBody } from \"../../../components/widgets\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function DeleteUserWidget(props) {\n  _s();\n  const session = useSelector(s => s.session);\n  const dispatch = useDispatch();\n  const [validateMode, setValidateMode] = useState(false);\n  async function toggleValidateMode(e) {\n    e.preventDefault();\n    setValidateMode(!validateMode);\n  }\n  async function clickedAccept(e) {\n    e.preventDefault();\n    try {\n      const deleteResponse = await axios.delete(`http://10.225.77.149:4090/api/users/${session.username}`, {\n        credentials: \"same-origin\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${session.authToken}`\n        }\n      });\n      let data = deleteResponse.data;\n      if (deleteResponse.status !== 200) {\n        throw new Error(data.message);\n      }\n      const signOutResponse = await axios.get(`http://10.225.77.149:4090/api/auth/signout`, {\n        credentials: \"same-origin\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${session.authToken}`\n        }\n      });\n      data = signOutResponse.data;\n      if (signOutResponse.status !== 200) {\n        throw new Error(data.message);\n      }\n      dispatch({\n        type: \"session/reset\"\n      });\n    } catch (err) {\n      console.error(`Failed to delete user. ${err}`);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(Widget, {\n    children: [/*#__PURE__*/_jsxDEV(TitleBar, {\n      title: \"Delete Account\",\n      children: validateMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(TitleButtons, {\n          children: [/*#__PURE__*/_jsxDEV(NavItem, {\n            children: /*#__PURE__*/_jsxDEV(TitleButton, {\n              name: \"Accept\",\n              icon: \"check\",\n              handleClick: clickedAccept\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n            children: /*#__PURE__*/_jsxDEV(TitleButton, {\n              name: \"Cancel\",\n              icon: \"clear\",\n              handleClick: toggleValidateMode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(TitleButton, {\n          name: \"Delete\",\n          icon: \"delete\",\n          handleClick: toggleValidateMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), validateMode && /*#__PURE__*/_jsxDEV(WidgetBody, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-danger\",\n        role: \"alert\",\n        children: \"Please keep in mind that all your information will be permanently removed from our website and cannot be retrieved. We are sorry to see you go.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(DeleteUserWidget, \"fdRMRYJFSpchMyJbvxx89Bm0/hI=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = DeleteUserWidget;\nvar _c;\n$RefreshReg$(_c, \"DeleteUserWidget\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","NavItem","TitleBar","TitleButton","TitleButtons","Widget","WidgetBody","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","DeleteUserWidget","props","_s","session","s","dispatch","validateMode","setValidateMode","toggleValidateMode","e","preventDefault","clickedAccept","deleteResponse","delete","username","credentials","headers","Authorization","authToken","data","status","Error","message","signOutResponse","get","type","err","console","error","children","title","name","icon","handleClick","fileName","_jsxFileName","lineNumber","columnNumber","class","role","_c","$RefreshReg$"],"sources":["/Users/ray/Desktop/Medico/frontend/src/containers/settings/widgets/deleteUser.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { NavItem } from \"../../../components/navs\";\nimport {\n  TitleBar,\n  TitleButton,\n  TitleButtons,\n  Widget,\n  WidgetBody,\n} from \"../../../components/widgets\";\nimport axios from \"axios\";\n\nexport default function DeleteUserWidget(props) {\n  const session = useSelector((s) => s.session);\n  const dispatch = useDispatch();\n\n  const [validateMode, setValidateMode] = useState(false);\n\n  async function toggleValidateMode(e) {\n    e.preventDefault();\n    setValidateMode(!validateMode);\n  }\n\n  async function clickedAccept(e) {\n    e.preventDefault();\n    try {\n      const deleteResponse = await axios.delete(\n        `http://10.225.77.149:4090/api/users/${session.username}`,\n        {\n          credentials: \"same-origin\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${session.authToken}`,\n          },\n        }\n      );\n\n      let data = deleteResponse.data;\n      if (deleteResponse.status !== 200) {\n        throw new Error(data.message);\n      }\n\n      const signOutResponse = await axios.get(\n        `http://10.225.77.149:4090/api/auth/signout`,\n        {\n          credentials: \"same-origin\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${session.authToken}`,\n          },\n        }\n      );\n\n      data = signOutResponse.data;\n      if (signOutResponse.status !== 200) {\n        throw new Error(data.message);\n      }\n\n      dispatch({\n        type: \"session/reset\",\n      });\n    } catch (err) {\n      console.error(`Failed to delete user. ${err}`);\n    }\n  }\n\n  return (\n    <Widget>\n      <TitleBar title='Delete Account'>\n        {validateMode ? (\n          <>\n            <TitleButtons>\n              <NavItem>\n                <TitleButton\n                  name='Accept'\n                  icon='check'\n                  handleClick={clickedAccept}\n                />\n              </NavItem>\n              <NavItem>\n                <TitleButton\n                  name='Cancel'\n                  icon='clear'\n                  handleClick={toggleValidateMode}\n                />\n              </NavItem>\n            </TitleButtons>\n          </>\n        ) : (\n          <>\n            <TitleButton\n              name='Delete'\n              icon='delete'\n              handleClick={toggleValidateMode}\n            />\n          </>\n        )}\n      </TitleBar>\n      {validateMode && (\n        <WidgetBody>\n          <div class='alert alert-danger' role='alert'>\n            Please keep in mind that all your information will be permanently\n            removed from our website and cannot be retrieved. We are sorry to\n            see you go.\n          </div>\n        </WidgetBody>\n      )}\n    </Widget>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}