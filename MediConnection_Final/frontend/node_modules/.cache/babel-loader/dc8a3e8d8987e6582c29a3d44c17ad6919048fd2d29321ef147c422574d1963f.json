{"ast":null,"code":"var _jsxFileName = \"/Users/desmondoforiatta/Desktop/Medico/frontend/src/containers/users/lists.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { FluidContainer, Row, Col } from \"../../components/layout\";\nimport { List, ListItem } from \"../../components/lists\";\nimport { AutoLoader } from \"../../components/loaders\";\nimport User from \"./user\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DefaultItems(props) {\n  return /*#__PURE__*/_jsxDEV(ListItem, {\n    className: \"border-0\",\n    children: /*#__PURE__*/_jsxDEV(FluidContainer, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          className: \"col-auto align-items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"my-0 text-muted\",\n            children: props.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 16,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, this);\n}\n_c = DefaultItems;\nexport function ListView(props) {\n  const userItems = [];\n  if (props.users && props.users.length > 0) {\n    for (const [index, user] of props.users.entries()) {\n      const userItem = /*#__PURE__*/_jsxDEV(ListItem, {\n        className: \"px-3\",\n        children: /*#__PURE__*/_jsxDEV(User, {\n          session: props.session,\n          username: user.username,\n          listView: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this);\n      userItems.push(userItem);\n    }\n  } else {\n    userItems.push( /*#__PURE__*/_jsxDEV(DefaultItems, {\n      message: props.defaultMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 20\n    }, this));\n  }\n  return /*#__PURE__*/_jsxDEV(List, {\n    className: \"md-list\",\n    children: userItems\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 10\n  }, this);\n}\n_c2 = ListView;\nexport default function InfiniteUserList(props) {\n  _s();\n  const session = useSelector(s => s.session);\n  const getUsers = useCallback(async _ref => {\n    let {\n      view = \"\",\n      search = \"\",\n      page = 0,\n      limit = 10\n    } = _ref;\n    try {\n      const searchParams = new URLSearchParams();\n      searchParams.append(\"view\", view ? view : \"\");\n      searchParams.append(\"search\", search ? search : \"\");\n      searchParams.append(\"page\", page);\n      searchParams.append(\"limit\", limit);\n      const response = await axios.get(`http://10.225.77.149:4090/api/users?${searchParams.toString()}`, {\n        headers: {\n          Authorization: `Bearer ${session.authToken}`\n        }\n      });\n      // console.log(response);\n      const users = response.data;\n      if (response.status !== 200) {\n        throw new Error(users.message);\n      }\n      return users;\n    } catch (err) {\n      throw err;\n    }\n  }, [session.authToken]);\n  const [state, setState] = useState({\n    users: [],\n    limit: 10\n  });\n\n  // If props change, initialize users.\n  useEffect(() => {\n    async function load() {\n      try {\n        const newUsers = await getUsers({\n          view: props.view,\n          search: props.search,\n          page: 0,\n          limit: state.limit\n        });\n        setState(prevState => {\n          return {\n            ...prevState,\n            users: newUsers\n          };\n        });\n      } catch (err) {\n        console.error(`Failed to load users. ${err}`);\n      }\n    }\n    load();\n  }, [props.view, props.search, getUsers, state.limit]);\n  async function appendUsers() {\n    try {\n      const newUsers = await getUsers({\n        view: props.view,\n        search: props.search,\n        page: Math.ceil(state.users.length / state.limit),\n        limit: state.limit\n      });\n      setState(prevState => {\n        const updatedUsers = [...prevState.users, ...newUsers];\n        return {\n          ...prevState,\n          users: updatedUsers\n        };\n      });\n    } catch (err) {\n      console.error(`Failed to append more users. ${err}`);\n    }\n  }\n\n  // Now render view\n  return /*#__PURE__*/_jsxDEV(FluidContainer, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        className: \"px-0\",\n        children: [/*#__PURE__*/_jsxDEV(ListView, {\n          session: session,\n          users: state.users,\n          defaultMessage: props.defaultMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), state.users.length > 0 && /*#__PURE__*/_jsxDEV(AutoLoader, {\n          callback: appendUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n}\n_s(InfiniteUserList, \"zIqjohMwcI6Xpjtj+XFmIfFdS/E=\", false, function () {\n  return [useSelector];\n});\n_c3 = InfiniteUserList;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"DefaultItems\");\n$RefreshReg$(_c2, \"ListView\");\n$RefreshReg$(_c3, \"InfiniteUserList\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","useSelector","FluidContainer","Row","Col","List","ListItem","AutoLoader","User","axios","jsxDEV","_jsxDEV","DefaultItems","props","className","children","message","fileName","_jsxFileName","lineNumber","columnNumber","_c","ListView","userItems","users","length","index","user","entries","userItem","session","username","listView","push","defaultMessage","_c2","InfiniteUserList","_s","s","getUsers","_ref","view","search","page","limit","searchParams","URLSearchParams","append","response","get","toString","headers","Authorization","authToken","data","status","Error","err","state","setState","load","newUsers","prevState","console","error","appendUsers","Math","ceil","updatedUsers","callback","_c3","$RefreshReg$"],"sources":["/Users/desmondoforiatta/Desktop/Medico/frontend/src/containers/users/lists.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { FluidContainer, Row, Col } from \"../../components/layout\";\nimport { List, ListItem } from \"../../components/lists\";\nimport { AutoLoader } from \"../../components/loaders\";\n\nimport User from \"./user\";\nimport axios from \"axios\";\n\nfunction DefaultItems(props) {\n  return (\n    <ListItem className='border-0'>\n      <FluidContainer>\n        <Row className='justify-content-center'>\n          <Col className='col-auto align-items-center'>\n            <h6 className='my-0 text-muted'>{props.message}</h6>\n          </Col>\n        </Row>\n      </FluidContainer>\n    </ListItem>\n  );\n}\n\nexport function ListView(props) {\n  const userItems = [];\n  if (props.users && props.users.length > 0) {\n    for (const [index, user] of props.users.entries()) {\n      const userItem = (\n        <ListItem key={index} className='px-3'>\n          <User\n            session={props.session}\n            username={user.username}\n            listView={true}\n          />\n        </ListItem>\n      );\n      userItems.push(userItem);\n    }\n  } else {\n    userItems.push(<DefaultItems message={props.defaultMessage} />);\n  }\n\n  return <List className='md-list'>{userItems}</List>;\n}\n\nexport default function InfiniteUserList(props) {\n  const session = useSelector((s) => s.session);\n\n  const getUsers = useCallback(\n    async ({ view = \"\", search = \"\", page = 0, limit = 10 }) => {\n      try {\n        const searchParams = new URLSearchParams();\n        searchParams.append(\"view\", view ? view : \"\");\n        searchParams.append(\"search\", search ? search : \"\");\n        searchParams.append(\"page\", page);\n        searchParams.append(\"limit\", limit);\n\n        const response = await axios.get(\n          `http://10.225.77.149:4090/api/users?${searchParams.toString()}`,\n          {\n            headers: {\n              Authorization: `Bearer ${session.authToken}`,\n            },\n          }\n        );\n        // console.log(response);\n        const users = response.data;\n        if (response.status !== 200) {\n          throw new Error(users.message);\n        }\n\n        return users;\n      } catch (err) {\n        throw err;\n      }\n    },\n    [session.authToken]\n  );\n\n  const [state, setState] = useState({\n    users: [],\n    limit: 10,\n  });\n\n  // If props change, initialize users.\n  useEffect(() => {\n    async function load() {\n      try {\n        const newUsers = await getUsers({\n          view: props.view,\n          search: props.search,\n          page: 0,\n          limit: state.limit,\n        });\n\n        setState((prevState) => {\n          return {\n            ...prevState,\n            users: newUsers,\n          };\n        });\n      } catch (err) {\n        console.error(`Failed to load users. ${err}`);\n      }\n    }\n\n    load();\n  }, [props.view, props.search, getUsers, state.limit]);\n\n  async function appendUsers() {\n    try {\n      const newUsers = await getUsers({\n        view: props.view,\n        search: props.search,\n        page: Math.ceil(state.users.length / state.limit),\n        limit: state.limit,\n      });\n\n      setState((prevState) => {\n        const updatedUsers = [...prevState.users, ...newUsers];\n\n        return {\n          ...prevState,\n          users: updatedUsers,\n        };\n      });\n    } catch (err) {\n      console.error(`Failed to append more users. ${err}`);\n    }\n  }\n\n  // Now render view\n  return (\n    <FluidContainer>\n      <Row>\n        <Col className='px-0'>\n          <ListView\n            session={session}\n            users={state.users}\n            defaultMessage={props.defaultMessage}\n          />\n          {state.users.length > 0 && <AutoLoader callback={appendUsers} />}\n        </Col>\n      </Row>\n    </FluidContainer>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}