{"ast":null,"code":"var _jsxFileName = \"/Users/desmondoforiatta/Desktop/Medico/frontend/src/containers/users/lists.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FluidContainer, Row, Col } from '../../components/layout';\nimport { List, ListItem } from '../../components/lists';\nimport { AutoLoader } from '../../components/loaders';\nimport User from './user';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DefaultItems(props) {\n  return /*#__PURE__*/_jsxDEV(ListItem, {\n    className: \"border-0\",\n    children: /*#__PURE__*/_jsxDEV(FluidContainer, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          className: \"col-auto align-items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"my-0 text-muted\",\n            children: props.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 9\n  }, this);\n}\n_c = DefaultItems;\nexport function ListView(props) {\n  const userItems = [];\n  if (props.users && props.users.length > 0) {\n    for (const [index, user] of props.users.entries()) {\n      const userItem = /*#__PURE__*/_jsxDEV(ListItem, {\n        className: \"px-3\",\n        children: /*#__PURE__*/_jsxDEV(User, {\n          session: props.session,\n          username: user.username,\n          listView: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 21\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }, this);\n      userItems.push(userItem);\n    }\n  } else {\n    userItems.push( /*#__PURE__*/_jsxDEV(DefaultItems, {\n      message: props.defaultMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this));\n  }\n  return /*#__PURE__*/_jsxDEV(List, {\n    className: \"md-list\",\n    children: userItems\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n}\n_c2 = ListView;\nexport default function InfiniteUserList(props) {\n  _s();\n  const session = useSelector(s => s.session);\n  const getUsers = useCallback(async _ref => {\n    let {\n      view = '',\n      search = '',\n      page = 0,\n      limit = 10\n    } = _ref;\n    try {\n      const searchParams = new URLSearchParams();\n      searchParams.append('view', view ? view : '');\n      searchParams.append('search', search ? search : '');\n      searchParams.append('page', page);\n      searchParams.append('limit', limit);\n      const response = await axios.get(`http://localhost:4090/api/users?${searchParams.toString()}`, {\n        headers: {\n          'Authorization': `Bearer ${session.authToken}`\n        }\n      });\n      // console.log(response);\n      const users = response.data;\n      if (response.status !== 200) {\n        throw new Error(users.message);\n      }\n      return users;\n    } catch (err) {\n      throw err;\n    }\n  }, [session.authToken]);\n  const [state, setState] = useState({\n    users: [],\n    limit: 10\n  });\n\n  // If props change, initialize users.\n  useEffect(() => {\n    async function load() {\n      try {\n        const newUsers = await getUsers({\n          view: props.view,\n          search: props.search,\n          page: 0,\n          limit: state.limit\n        });\n        setState(prevState => {\n          return {\n            ...prevState,\n            users: newUsers\n          };\n        });\n      } catch (err) {\n        console.error(`Failed to load users. ${err}`);\n      }\n    }\n    load();\n  }, [props.view, props.search, getUsers, state.limit]);\n  async function appendUsers() {\n    try {\n      const newUsers = await getUsers({\n        view: props.view,\n        search: props.search,\n        page: Math.ceil(state.users.length / state.limit),\n        limit: state.limit\n      });\n      setState(prevState => {\n        const updatedUsers = [...prevState.users, ...newUsers];\n        return {\n          ...prevState,\n          users: updatedUsers\n        };\n      });\n    } catch (err) {\n      console.error(`Failed to append more users. ${err}`);\n    }\n  }\n\n  // Now render view\n  return /*#__PURE__*/_jsxDEV(FluidContainer, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        className: \"px-0\",\n        children: [/*#__PURE__*/_jsxDEV(ListView, {\n          session: session,\n          users: state.users,\n          defaultMessage: props.defaultMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), state.users.length > 0 && /*#__PURE__*/_jsxDEV(AutoLoader, {\n          callback: appendUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 9\n  }, this);\n}\n_s(InfiniteUserList, \"Hl4SQE91U67Yvq31JwAGA/GxPZE=\", false, function () {\n  return [useSelector];\n});\n_c3 = InfiniteUserList;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"DefaultItems\");\n$RefreshReg$(_c2, \"ListView\");\n$RefreshReg$(_c3, \"InfiniteUserList\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","useSelector","FluidContainer","Row","Col","List","ListItem","AutoLoader","User","axios","jsxDEV","_jsxDEV","DefaultItems","props","className","children","message","fileName","_jsxFileName","lineNumber","columnNumber","_c","ListView","userItems","users","length","index","user","entries","userItem","session","username","listView","push","defaultMessage","_c2","InfiniteUserList","_s","s","getUsers","_ref","view","search","page","limit","searchParams","URLSearchParams","append","response","get","toString","headers","authToken","data","status","Error","err","state","setState","load","newUsers","prevState","console","error","appendUsers","Math","ceil","updatedUsers","callback","_c3","$RefreshReg$"],"sources":["/Users/desmondoforiatta/Desktop/Medico/frontend/src/containers/users/lists.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FluidContainer, Row, Col } from '../../components/layout';\nimport { List, ListItem } from '../../components/lists';\nimport { AutoLoader } from '../../components/loaders';\n\nimport User from './user';\nimport axios from 'axios';\n\n\nfunction DefaultItems(props) {\n    return (\n        <ListItem className=\"border-0\">\n            <FluidContainer>\n                <Row className=\"justify-content-center\">\n                    <Col className=\"col-auto align-items-center\">\n                        <h6 className=\"my-0 text-muted\">\n                            {props.message}\n                        </h6>\n                    </Col>\n                </Row>\n            </FluidContainer>\n        </ListItem>\n    );\n}\n\n\nexport function ListView(props) {\n    const userItems = [];\n    if (props.users && props.users.length > 0) {\n        for (const [index, user] of props.users.entries()) {\n\n            const userItem = (\n                <ListItem key={index} className=\"px-3\">\n                    <User\n                        session={props.session}\n                        username={user.username}\n                        listView={true}\n                    />\n                </ListItem>\n            );\n            userItems.push(userItem);\n        }\n    } else {\n        userItems.push(\n            <DefaultItems message={props.defaultMessage} />\n        );\n    }\n\n    return (\n        <List className=\"md-list\">\n            {userItems}\n        </List>\n    );\n}\n\n\nexport default function InfiniteUserList(props) {\n    const session = useSelector(s => s.session);\n\n    const getUsers = useCallback(async ({view='', search='', page=0, limit=10}) => {\n        try {\n            const searchParams = new URLSearchParams();\n            searchParams.append('view', (view) ? view : '');\n            searchParams.append('search', (search) ? search : '');\n            searchParams.append('page', page);\n            searchParams.append('limit', limit);\n\n            const response = await axios.get(`http://localhost:4090/api/users?${searchParams.toString()}`, {\n                headers: {\n                'Authorization': `Bearer ${session.authToken}`\n                }\n            });\n            // console.log(response);\n            const users =  response.data;\n            if (response.status !== 200) {\n                throw new Error(users.message);\n            }\n\n            return users;\n        } catch (err) {\n            throw(err);\n        }\n    }, [session.authToken]);\n\n    const [state, setState] = useState({\n        users: [],\n        limit: 10\n    });\n\n    // If props change, initialize users.\n    useEffect(() => {\n        async function load() {\n            try {\n                const newUsers = await getUsers({\n                    view: props.view,\n                    search: props.search,\n                    page: 0,\n                    limit: state.limit\n                });\n\n                setState(prevState => {\n                    return {\n                        ...prevState,\n                        users: newUsers\n                    }\n                });\n            } catch (err) {\n                console.error(`Failed to load users. ${err}`);\n            }\n        }\n\n        load();\n    }, [props.view, props.search, getUsers, state.limit]);\n\n    async function appendUsers() {\n        try {\n            const newUsers = await getUsers({\n                view: props.view,\n                search: props.search,\n                page: Math.ceil(state.users.length / state.limit),\n                limit: state.limit\n            });\n            \n            setState(prevState => {\n                const updatedUsers = [...prevState.users, ...newUsers];\n\n                return {\n                    ...prevState,\n                    users: updatedUsers\n                }\n            });\n        } catch (err) {\n            console.error(`Failed to append more users. ${err}`);\n        }\n    }\n\n    // Now render view\n    return (\n        <FluidContainer>\n            <Row>\n                <Col className=\"px-0\">\n                    <ListView\n                        session={session}\n                        users={state.users}\n                        defaultMessage={props.defaultMessage}\n                    />\n                    {(state.users.length > 0) &&\n                        <AutoLoader callback={appendUsers} />\n                    }\n                </Col>\n            </Row>\n        </FluidContainer>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}